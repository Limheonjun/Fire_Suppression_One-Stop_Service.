<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd"> 
<mapper namespace="chart">

<select id="selectSensorDataByDay" parameterType="java.util.HashMap" resultType="java.util.HashMap">
	<![CDATA[select location as value, count(*) as count from sensorData WHERE DATE(date) >= STR_TO_DATE(#{startDate}, '%Y-%m-%d') AND DATE(date) <= STR_TO_DATE(#{endDate}, '%Y-%m-%d') group by location;]]>
</select>

<select id="selectSensorDetectionCheck" parameterType="java.util.HashMap" resultType="java.util.HashMap">
	<![CDATA[select result as value, count(*) as count from sensordetectioncheck WHERE DATE(date) >= STR_TO_DATE(#{startDate}, '%Y-%m-%d') AND DATE(date) <= STR_TO_DATE(#{endDate}, '%Y-%m-%d') group by result]]>
</select>

<select id="selectSensorDetectionCheckByLocation" parameterType="java.util.HashMap" resultType="java.util.HashMap">
	<![CDATA[select result as value, count(*) as conut from sensordetectioncheck where location = #{location} group by result]]>
</select>

<select id="selectSensorDetectionCheckByPeriod" parameterType="java.util.HashMap" resultType="java.util.HashMap">
	<![CDATA[select result as value, count(*) as conut from sensordetectioncheck WHERE DATE(date) >= STR_TO_DATE(#{startDate}, '%Y-%m-%d') AND DATE(date) <= STR_TO_DATE(#{endDate}, '%Y-%m-%d')  group by result]]>
</select>

<select id="selectSensorDetectionCheckByLocationPeriod" parameterType="java.util.HashMap" resultType="java.util.HashMap">
	<![CDATA[select result as value, count(*) as conut from sensordetectioncheck WHERE DATE(date) >= STR_TO_DATE(#{startDAte}, '%Y-%m-%d') AND DATE(date) <= STR_TO_DATE(#{endDate}, '%Y-%m-%d') AND location ='우리' group by result]]>
</select>

<select id="selectDataCount" parameterType="java.util.HashMap" resultType="int">
	<![CDATA[select count(*) as count from sensordata]]>
</select>




</mapper>